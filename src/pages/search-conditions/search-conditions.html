<ion-header no-border>

  <ion-toolbar>
    <div class="input-box">
      <ion-icon class="szom" name="md-sousuo"></ion-icon>
      <ion-searchbar [(ngModel)]="selectString" (ionInput)="goSelcet($event)" placeholder="搜索服务、办事项目"></ion-searchbar>
    </div>
    <button ion-button (click)="goBack()" clear float-right>取消</button>
  </ion-toolbar>

</ion-header>


<ion-content overflow-scroll="false">
  <div class="conditions">
    <div #btn class="select-btn" (click)="selectShow(btn)">
      <div class="left">
        <ion-icon [class.color-blue]="timeStarts" class="szom" name="md-shaixuan"></ion-icon>
        <p class="title">筛选:</p>
        <p [class.color-blue]="timeStarts" class="text">{{timeStarts}}</p>
        <p [class.color-blue]="timeStarts || timeEnd" *ngIf="!isTimeStart || timeEnd">至</p>
        <p [class.color-blue]="timeEnd" class="text">{{timeEnd}}</p>
      </div>
      <ion-icon class="szom" [name]="selectBtn" (click)="selectTimeShowFlag = !selectTimeShowFlag"></ion-icon>
    </div>

    <ion-list class="select-time" *ngIf="selectTimeShowFlag">
      <div class="date-select">
        <div class="title">起始时间：</div>
        <ion-datetime displayFormat="YYYY年MM月DD日" doneText="确定" cancelText="取消" pickerFormat="YYYY MM DD" (ngModelChange)="TimeStartChange()"
          [(ngModel)]="timeStarts"></ion-datetime>
        <div #tip [class.tip]="isTimeStart" *ngIf="isTimeStart">请选择</div>
        <ion-icon class="szom" name="md-you"></ion-icon>
      </div>
      <div class="date-select">
        <div class="title">结束时间：</div>
        <ion-datetime displayFormat="YYYY年MM月DD日" doneText="确定" cancelText="取消" pickerFormat="YYYY MM DD" (ngModelChange)="TimeEndChange()"
          [(ngModel)]="timeEnd"></ion-datetime>
        <div #tip [class.tip]="isTimeEnd" *ngIf="isTimeEnd">请选择</div>
        <ion-icon class="szom" name="md-you"></ion-icon>
      </div>
      <div class="btn">
        <button ion-button color="light" (click)="reset()">重置</button>
        <button ion-button (click)="goSelcet($event)">确定</button>
      </div>
    </ion-list>
  </div>

  <div class="shade" *ngIf="selectTimeShowFlag" (click)="selectTimeShowFlag = false"></div>
  <ion-list *ngIf="logDataList" class="daily-list">
    <ion-item *ngFor="let log of logDataList;let i=index;" tappable (click)="goDailyShow(log)">
      <h4 *ngIf="selectIndex"
      >{{log.title.substring(0, selectIndex[i])}}<span class="hightBright">{{selectString.trim()}}</span
        >{{log.title.substring(selectIndex[i]+selectString.length, log.title.length).trim()}}</h4>
      <h4 *ngIf="!selectIndex">{{log.title}}</h4>
      <div class="other">
        <ion-note class="date">{{log.publishTime | date:'yyyy-MM-dd' }}</ion-note>
        <ion-note>
          <ion-icon class="szom" name="md-dianzanmoren"></ion-icon> {{log.likeCount}}</ion-note>
        <ion-note>
          <ion-icon class="szom" name="md-xiaoxi"></ion-icon> {{log.commentCount}}</ion-note>
      </div>
      <ion-thumbnail item-end *ngIf="i%2==0">
        <img src="img/thumbnail-totoro.png">
        <!-- <img-loader src="img/thumbnail-totoro.png" useImg fallback="assets/imgs/fail.jpg"></img-loader> -->
      </ion-thumbnail>
    </ion-item>
  </ion-list>
  <ion-infinite-scroll (ionInfinite)="more($event)">
    <ion-infinite-scroll-content loadingText="正在加载..."></ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>