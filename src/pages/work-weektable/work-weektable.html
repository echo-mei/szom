<!--
  Generated template for the WorkWeektablePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>

  <ion-navbar color="white">
    <ion-title>工作周表</ion-title>
    <ion-buttons right (click)="goStatitics()">
      <button ion-button clear class="statistics">统计</button>
    </ion-buttons>
  </ion-navbar>

  <div class="time-select">
    <button ion-button color="dark" clear (click)="updateList(-1)">
      <ion-icon name="md-arrow-dropleft"></ion-icon>
    </button>
    <ion-multi-picker class="time" [(ngModel)]="weekdate" item-content [multiPickerColumns]="dateControls" doneText="确定" cancelText="取消" (ionChange)="updateList(0);"></ion-multi-picker>
    <label class="time-show" *ngIf="weekdate">第{{weekdate.split(" ")[0]}}年 第{{weekdate.split(" ")[1]}}周</label>
    <button ion-button color="dark" clear (click)="updateList(1)">
      <ion-icon name="md-arrow-dropright"></ion-icon>
    </button>
  </div>

  <div class="time-tabs">
    <a ion-button clear [class.active]="anchorFlag === 1" (click)="goAnchor(1)">周一</a>
    <a ion-button clear [class.active]="anchorFlag === 2" (click)="goAnchor(2)">周二</a>
    <a ion-button clear [class.active]="anchorFlag === 3" (click)="goAnchor(3)">周三</a>
    <a ion-button clear [class.active]="anchorFlag === 4" (click)="goAnchor(4)">周四</a>
    <a ion-button clear [class.active]="anchorFlag === 5" (click)="goAnchor(5)">周五</a>
    <a ion-button clear [class.active]="anchorFlag === 6" (click)="goAnchor(6)">周六</a>
    <a ion-button clear [class.active]="anchorFlag === 7" (click)="goAnchor(7)">周日</a>
  </div>
</ion-header>

<ion-content #content>
  <div class="add-new" (click)="goCreate()">
    <ion-icon class="szom" name="md-bianjixian"></ion-icon>
  </div>

  <div class="noDailyList" *ngIf="weektableList.length<=0 && showOneFlag">
    <embed src="../../assets/imgs/nolog.svg" type="image/svg+xml" />
    <p>您还没有发布周表
      <br>快去
      <a (click)="goCreate()">发布</a>吧~</p>
  </div>

  <div *ngIf="weektableList.length<=0 && !showOneFlag">
    <not-found></not-found>
  </div>

  <ion-list class="weektable-list" *ngIf="weektableList.length>0">
    <ng-container *ngFor="let weektable of weektableList;let i = index">
      <div id="{{weektable.week}}" class="title" *ngIf="i===0 || (i>0 && weektableList[i].week != weektableList[i-1].week)">
        {{weekName[weektable.week-1]}}
      </div>
      <ion-item>
        <div class="type" [class]="'type type'+weektable.weektableTypeId"><span class="text">{{weektable.typeName}}</span></div>
        <div class="content">
          <p class="text">{{weektable.content}}</p>
          <div class="time">
            <ion-note>{{weektable.workDateStr | date:'yyyy.MM.dd'}}</ion-note>
            <ion-note>{{weekName[weektable.week-1]}}</ion-note>
            <ion-note>{{weektable.dayPeriodName}}</ion-note>
          </div>
        </div>
      </ion-item>
    </ng-container>
  </ion-list>
</ion-content>
